graph TD
    User((User)) -->|Clicks Buy| SDK[JavaScript SDK]
    SDK -->|Opens Modal| FE[Checkout Frontend\nPort: 3001]
    
    subgraph "Docker Network"
        FE -->|POST /pay| API[Backend API\nPort: 8000]
        
        API -->|1. Create Pending Record| DB[(PostgreSQL)]
        API -->|2. Push Job| Redis[Redis Queue\nPort: 6379]
        API -- 3. Return 'Pending' --> FE
        
        Redis -->|Pop Job| Worker[Worker Service]
        Worker -->|4. Process Payment| Worker
        Worker -->|5. Update Status| DB
        
        Worker -.->|6. Send Webhook (Optional)| EXT[External Webhook]
    end
    
    FE -- Polls Status --> API
    FE -- Success Message --> SDK